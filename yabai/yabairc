yabai -m signal --add event=dock_did_restart action="sudo yabai --load-sa"
sudo yabai --load-sa

# Define variables
non_transparent_apps="(Safari|Zen Browser|WhatsApp|Google Chrome|Microsoft Word|Microsoft Excel|Preview|Finder|Visual Studio Code|Spotify|Music|TV|Megogo|Monica|Notes|Microsoft PowerPoint|Firefox)"
transparent_apps="(Ghostty|Obsidian|Zed|Claude|Monica)"
opacity_value=0.75

# ====== Global Settings ======

# Layout mode - stack only (no BSP, no layout switching)
yabai -m config layout stack
yabai -m config window_topmost off
# Window opacity - 75% for most apps, 100% for non-transparent apps
yabai -m config window_shadow float
yabai -m config window_opacity on
yabai -m config window_opacity_duration 0.0
yabai -m config active_window_opacity 1.0
yabai -m config normal_window_opacity 1.0

# Mouse support
yabai -m config mouse_follows_focus on
yabai -m config focus_follows_mouse off
yabai -m config mouse_modifier fn
yabai -m config mouse_action1 move
yabai -m config mouse_action2 resize

# Window borders (disabled by default)
yabai -m config window_border off
# yabai -m config window_border_width 4
# yabai -m config active_window_border_color 0xff81a1c1
# yabai -m config normal_window_border_color 0xff3b4252

# Padding and gaps (minimal for stack mode)
yabai -m config top_padding 7
yabai -m config bottom_padding 7
yabai -m config left_padding 7
yabai -m config right_padding 7
yabai -m config window_gap 7

# External bar support (for sketchybar)
yabai -m config external_bar all:48:0

# ====== Space Configuration ======

# Set space labels (5 spaces required)
yabai -m space 1 --label general
yabai -m space 2 --label personal
yabai -m space 3 --label work
yabai -m space 4 --label media
yabai -m space 5 --label ai

# ====== Application Rules ======

# Personal space apps
yabai -m rule --add app="^Ghostty$" space=personal
yabai -m rule --add app="^Safari$" space=personal
yabai -m rule --add app="^Zed$" space=personal
yabai -m rule --add app="^Zen Browser$" space=personal
yabai -m rule --add app="^VSCodium$" space=personal
yabai -m rule --add app="^Visual Studio Code$" space=personal
yabai -m rule --add app="^Obsidian$" space=personal

# Work space apps
yabai -m rule --add app="^Microsoft Word$" space=work
yabai -m rule --add app="^Microsoft Excel$" space=work
yabai -m rule --add app="^Notes$" space=work
yabai -m rule --add app="^Microsoft PowerPoint$" space=work
yabai -m rule --add app="^Google Chrome$" space=work
yabai -m rule --add app="^Firefox$" space=work

# Media space apps
yabai -m rule --add app="^Spotify$" space=media
yabai -m rule --add app="^Music$" space=media
yabai -m rule --add app="^TV$" space=media
yabai -m rule --add app="^Megogo$" space=media

# AI space apps
yabai -m rule --add app="^Claude$" space=ai
yabai -m rule --add app="^Monica$" space=ai

# ====== Float Rules ======

# System apps that should always float
yabai -m rule --add app="^System Settings$" manage=off
yabai -m rule --add app="^System Preferences$" manage=off
yabai -m rule --add app="^System Information$" manage=off
yabai -m rule --add app="^Activity Monitor$" manage=off
yabai -m rule --add app="^Calculator$" manage=off
yabai -m rule --add app="^Finder$" title="(Copy|Connect|Move|Info|Pref)" manage=off
yabai -m rule --add app="^Archive Utility$" manage=off
yabai -m rule --add app="^Disk Utility$" manage=off
yabai -m rule --add app="^App Store$" manage=off
yabai -m rule --add app="^Time Machine$" manage=off

# Float preferences windows
yabai -m rule --add title="^Preferences$" manage=off
yabai -m rule --add title="^Settings$" manage=off

# ====== Signals ======

# Refresh sketchybar when space/window changes
yabai -m signal --add event=space_changed action="sketchybar --trigger space_change"
yabai -m signal --add event=display_changed action="sketchybar --trigger display_change"
yabai -m signal --add event=window_focused action="sketchybar --trigger window_focus"
yabai -m signal --add event=window_title_changed action="sketchybar --trigger title_change"

# Apply selective opacity to windows
yabai -m signal --add event=window_focused action="$HOME/.config/yabai/scripts/window_opacity.sh"
yabai -m signal --add event=window_created action="$HOME/.config/yabai/scripts/window_opacity.sh"

###############################################################################
#                                Defaults
###############################################################################

yabai -m config \
	focus_follows_mouse off \
	window_origin_display default \
	window_placement second_child \
	window_zoom_persist on \
	window_shadow off \
	window_animation_duration 2 \
	window_animation_frame_rate 120 \
	window_opacity_duration 0.0 \
	insert_feedback_color 0xffd75f5f \
	active_window_border_color 0xff775759 \
	normal_window_border_color 0xff555555 \
	window_border_width 4 \
	window_border_radius 12 \
	window_border_blur off \
	window_border_hidpi on \
	window_border off \
	split_ratio 0.50 \
	split_type auto \
	auto_balance off \
	window_gap 06 \
	layout stack \
	mouse_modifier fn \
	mouse_action1 move \
	mouse_action2 resize \
	mouse_drop_action swap

echo "yabai configuration loaded successfully"# Padding and gaps
